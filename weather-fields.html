<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WindMar - Meteorological and Oceanographic Data Fields for Maritime Weather Routing</title>
    <link rel="stylesheet" href="assets/css/docs.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
</head>
<body>

<!-- Header -->
<header class="docs-header">
    <div class="docs-header-content">
        <a href="docs.html" class="docs-logo">
            <i class="fas fa-ship"></i>
            <span>WindMar</span>
        </a>
        <nav>
            <ul class="docs-nav">
                <li><a href="docs.html">Documentation</a></li>
                <li class="docs-nav-dropdown">
                    <a href="#">Technical Articles <i class="fas fa-caret-down"></i></a>
                    <ul class="docs-nav-dropdown-menu">
                        <li><a href="weather-fields.html" class="active">Weather Fields</a></li>
                        <li><a href="data-pipeline.html">Data Pipeline</a></li>
                        <li><a href="hydrodynamics.html">Hydrodynamics &amp; RAO</a></li>
                        <li><a href="astar-pathfinding.html">A* Pathfinding</a></li>
                        <li><a href="route-optimization-engines.html">Optimization Engines</a></li>
                        <li><a href="weather-data.html">Weather Acquisition</a></li>
                        <li><a href="monte-carlo.html">Monte Carlo</a></li>
                        <li><a href="open-problems.html">Open Problems</a></li>
                    </ul>
                </li>
                <li><a href="https://github.com/windmar-nav/windmar" target="_blank"><i class="fab fa-github"></i> GitHub</a></li>
                <li><a href="https://demo-windmar.slmar.co" target="_blank" class="demo-nav-link"><i class="fas fa-play-circle"></i> Live Demo</a></li>
            </ul>
        </nav>
        <a href="project.html" class="back-to-main"><i class="fas fa-arrow-left"></i> Back to Main Site</a>
    </div>
</header>

<!-- Main Layout -->
<div class="docs-container">

    <!-- Sidebar -->
    <aside class="docs-sidebar">

        <div class="sidebar-section">
            <div class="sidebar-title">Article</div>
            <ul class="sidebar-menu">
                <li><a href="#abstract"><i class="fas fa-file-alt"></i> Abstract</a></li>
                <li><a href="#introduction"><i class="fas fa-book-open"></i> Introduction</a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Wind Fields</div>
            <ul class="sidebar-menu">
                <li><a href="#atmospheric-fields"><i class="fas fa-wind"></i> Atmospheric Fields</a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Wave Fields</div>
            <ul class="sidebar-menu">
                <li><a href="#sea-state-fields"><i class="fas fa-water"></i> Sea State Fields</a></li>
                <li><a href="#wave-decomposition"><i class="fas fa-wave-square"></i> Wave Decomposition</a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Ocean Currents</div>
            <ul class="sidebar-menu">
                <li><a href="#current-fields"><i class="fas fa-arrows-alt-h"></i> Current Fields</a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Implementation</div>
            <ul class="sidebar-menu">
                <li><a href="#ocean-mask"><i class="fas fa-globe"></i> Ocean Mask</a></li>
                <li><a href="#api-performance"><i class="fas fa-tachometer-alt"></i> API Performance</a></li>
                <li><a href="#startup-prefetch"><i class="fas fa-download"></i> Startup Prefetch</a></li>
                <li><a href="#data-quality"><i class="fas fa-check-circle"></i> Data Quality</a></li>
            </ul>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Resources</div>
            <ul class="sidebar-menu">
                <li><a href="#references"><i class="fas fa-bookmark"></i> References</a></li>
                <li><a href="docs.html"><i class="fas fa-arrow-left"></i> Back to Docs</a></li>
                <li><a href="https://github.com/windmar-nav/windmar" target="_blank"><i class="fab fa-github"></i> GitHub</a></li>
            </ul>
        </div>

    </aside>

    <!-- Main Content -->
    <main class="docs-main">
        <div class="docs-content">

            <!-- ============================================================ -->
            <!-- ABSTRACT -->
            <!-- ============================================================ -->
            <section id="abstract">
                <h1>Meteorological and Oceanographic Data Fields for Maritime Weather Routing</h1>
                <p class="docs-subtitle">Environmental forcing parameters used in WindMar's vessel performance prediction and route optimization</p>

                <div class="alert info">
                    <strong><i class="fas fa-info-circle"></i> Technical Article</strong><br>
                    This article details the meteorological and oceanographic fields ingested by WindMar
                    for computing vessel resistance, speed loss, and fuel consumption along candidate routes.
                    It covers atmospheric wind fields from GFS and ERA5, spectral wave parameters from
                    CMEMS, ocean current vectors, and the ocean masking procedure used to exclude land
                    pixels from routing grids.
                </div>

                <h3>Abstract</h3>
                <p>
                    Maritime weather routing systems depend on accurate environmental forcing data to predict
                    vessel performance under realistic sea conditions. WindMar ingests three categories of
                    geophysical fields &mdash; atmospheric winds, ocean surface waves, and ocean currents &mdash;
                    from operational numerical weather prediction (NWP) and ocean analysis systems. Wind fields
                    are obtained from the NCEP Global Forecast System (GFS) at 0.25&deg; resolution with ERA5
                    reanalysis serving as a climatological fallback. Wave fields are sourced from the Copernicus
                    Marine Environment Monitoring Service (CMEMS) global wave analysis and forecast product at
                    0.083&deg; resolution, providing total sea state parameters along with decomposed swell and
                    wind-wave components. Ocean current fields are drawn from the CMEMS global physics analysis
                    and forecast at the same spatial resolution. This article describes each field, its physical
                    meaning, the data source and resolution, the vector decomposition conventions used, and the
                    ocean masking procedure that filters land pixels from weather grids before they enter the
                    routing engine.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- INTRODUCTION -->
            <!-- ============================================================ -->
            <section id="introduction">
                <h2>1. Introduction</h2>

                <p>
                    The performance of an ocean-going vessel is governed by the environmental conditions it
                    encounters along its route. Wind generates aerodynamic resistance on the hull superstructure
                    and cargo (particularly significant for container ships and car carriers with high windage
                    areas). Waves impose added resistance through radiation, diffraction, and motion-induced
                    effects that can increase fuel consumption by 15&ndash;30% in heavy weather relative to
                    calm-water conditions. Ocean currents alter the vessel's speed over ground (SOG) without
                    changing its speed through water (STW), directly affecting passage time and, indirectly,
                    fuel consumption through engine load adjustments. Accurate representation of these three
                    forcing categories is therefore essential for any weather routing system that aims to
                    optimize fuel efficiency or minimize voyage duration under realistic conditions. In WindMar,
                    the environmental data feeds into the <a href="hydrodynamics.html">hydrodynamic resistance
                    models</a> (Blendermann wind resistance, STA-wave added resistance, seakeeping response
                    amplitude operators) and the <a href="astar-pathfinding.html">A* pathfinding algorithm</a>
                    that evaluates candidate route segments.
                </p>

                <p>
                    WindMar organizes environmental data into a unified <code>WeatherData</code> dataclass
                    that encapsulates scalar fields (significant wave height, wave period), vector fields
                    (wind and current as U/V components), and decomposed spectral fields (swell versus
                    wind-wave partitions). Each field carries metadata including its source parameter name,
                    timestamp, geographic extent (latitude and longitude arrays), physical unit, and spatial
                    grid of values. This article documents the complete set of fields, grouped into three
                    categories: atmospheric fields (Section 2), sea state fields (Section 3), and ocean
                    current fields (Section 4). Section 5 describes the ocean mask used to distinguish water
                    from land in the routing grid, and Section 6 discusses data quality considerations and
                    limitations of the forecast products employed.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- ATMOSPHERIC FIELDS -->
            <!-- ============================================================ -->
            <section id="atmospheric-fields">
                <h2>2. Atmospheric Fields</h2>

                <p>
                    Wind forcing is the primary atmospheric input to the routing engine. WindMar obtains
                    10-metre wind fields from two sources: the NCEP Global Forecast System (GFS) for
                    operational forecasts and the ECMWF ERA5 reanalysis for climatological fallback when
                    the forecast horizon is exceeded. Both products provide wind as orthogonal U and V
                    components on a regular latitude-longitude grid, which WindMar converts to scalar
                    speed and meteorological direction for use in the Blendermann wind resistance model.
                </p>

                <h3>2.1 GFS Operational Forecast</h3>
                <p>
                    The GFS model is produced by the National Centers for Environmental Prediction (NCEP)
                    of the U.S. National Oceanic and Atmospheric Administration (NOAA). WindMar accesses
                    GFS data via the NOMADS (NOAA Operational Model Archive and Distribution System)
                    endpoint at <code>https://nomads.ncep.noaa.gov/cgi-bin/filter_gfs_0p25.pl</code>,
                    which provides filtered GRIB2 data for specific parameters and subregions. The GFS
                    runs four times daily at 00, 06, 12, and 18 UTC, with output becoming available
                    approximately 3.5 hours after each run time. WindMar's <code>GFSDataProvider</code>
                    automatically selects the most recent available run, accounting for this production
                    lag. The forecast extends to 120 hours (5 days) at 3-hourly temporal resolution,
                    yielding 41 forecast steps (hours 0, 3, 6, &hellip;, 120).
                </p>

                <p>
                    The two parameters retrieved are the U-component (<code>UGRD</code>) and V-component
                    (<code>VGRD</code>) of wind at 10 metres above the surface. The U-component represents
                    the eastward wind velocity and the V-component represents the northward wind velocity,
                    both in metres per second. These are provided on a global 0.25&deg; &times; 0.25&deg;
                    latitude-longitude grid (1440 &times; 721 grid points). The GRIB2 format is parsed
                    using the <code>cfgrib</code> and <code>pygrib</code> libraries.
                </p>

                <h3>2.2 ERA5 Reanalysis</h3>
                <p>
                    For climatological conditions beyond the operational forecast horizon, WindMar falls
                    back to the ERA5 global reanalysis produced by ECMWF. ERA5 provides hourly estimates
                    of atmospheric variables on a 0.25&deg; grid from 1940 to the present, combining model
                    data with observations through 4D-Var data assimilation. WindMar's
                    <code>ClimatologyProvider</code> retrieves ERA5 monthly means from the
                    <code>reanalysis-era5-single-levels</code> dataset for the variables
                    <code>u10</code> (10-metre U-wind) and <code>v10</code> (10-metre V-wind). These
                    climatological fields serve as the baseline wind estimate when the voyage extends
                    beyond the 10-day forecast-to-climatology blending window.
                </p>

                <h3>2.3 Vector Decomposition</h3>
                <p>
                    The routing engine requires scalar wind speed and meteorological direction (the
                    direction <em>from</em> which the wind blows, measured clockwise from true north).
                    These are derived from the U and V components using standard meteorological
                    conventions:
                </p>

                <div class="formula-block">
                    <div class="formula-title">Wind Speed and Direction from U/V Components</div>
\[ \text{wind\_speed} = \sqrt{u^2 + v^2} \]
\[ \text{wind\_direction} = \bigl(270 - \arctan2(v, u) \times \tfrac{180}{\pi}\bigr) \bmod 360 \]
<div class="formula-where">
where \( u \) is the eastward component (m/s)<br>
\( v \) is the northward component (m/s)<br>
\( \text{wind\_direction} \) is in degrees from true north (meteorological convention)
</div>
                </div>

                <p>
                    The 270&deg; offset and sign convention ensure that a purely westerly wind (u &gt; 0,
                    v = 0) yields a direction of 270&deg;, corresponding to "wind from the west," which
                    is the standard meteorological convention. The <code>WeatherData</code> dataclass
                    stores both the raw <code>u_component</code> and <code>v_component</code> arrays and
                    the derived scalar <code>values</code> (speed) field, allowing downstream consumers
                    to use whichever representation is most convenient.
                </p>

                <h3>2.4 Summary of Atmospheric Parameters</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Variable</th>
                            <th>Source</th>
                            <th>Resolution</th>
                            <th>Units</th>
                            <th>Update Frequency</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Wind U-component</td>
                            <td><code>UGRD:10m</code></td>
                            <td>GFS (NCEP/NOAA)</td>
                            <td>0.25&deg;</td>
                            <td>m/s</td>
                            <td>6-hourly runs</td>
                        </tr>
                        <tr>
                            <td>Wind V-component</td>
                            <td><code>VGRD:10m</code></td>
                            <td>GFS (NCEP/NOAA)</td>
                            <td>0.25&deg;</td>
                            <td>m/s</td>
                            <td>6-hourly runs</td>
                        </tr>
                        <tr>
                            <td>Wind speed (derived)</td>
                            <td>&mdash;</td>
                            <td>Computed</td>
                            <td>0.25&deg;</td>
                            <td>m/s</td>
                            <td>&mdash;</td>
                        </tr>
                        <tr>
                            <td>Wind direction (derived)</td>
                            <td>&mdash;</td>
                            <td>Computed</td>
                            <td>0.25&deg;</td>
                            <td>degrees</td>
                            <td>&mdash;</td>
                        </tr>
                        <tr>
                            <td>ERA5 U-wind</td>
                            <td><code>u10</code></td>
                            <td>ERA5 (ECMWF)</td>
                            <td>0.25&deg;</td>
                            <td>m/s</td>
                            <td>Monthly reanalysis</td>
                        </tr>
                        <tr>
                            <td>ERA5 V-wind</td>
                            <td><code>v10</code></td>
                            <td>ERA5 (ECMWF)</td>
                            <td>0.25&deg;</td>
                            <td>m/s</td>
                            <td>Monthly reanalysis</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert info">
                    <strong><i class="fas fa-info-circle"></i> Forecast Horizon</strong><br>
                    GFS forecasts extend to 120 hours (5 days) at 3-hourly steps, providing 41 forecast
                    time steps per model run. For voyages exceeding this horizon, WindMar blends the
                    forecast with ERA5 climatology over a 2-day transition window controlled by the
                    <code>FORECAST_HORIZON_DAYS</code> (10) and <code>BLEND_WINDOW_DAYS</code> (2)
                    parameters in the <code>ClimatologyProvider</code>.
                </div>
            </section>

            <!-- ============================================================ -->
            <!-- SEA STATE FIELDS -->
            <!-- ============================================================ -->
            <section id="sea-state-fields">
                <h2>3. Sea State Fields</h2>

                <p>
                    Wave forcing is the dominant contributor to added resistance and speed loss for most
                    commercial vessel types. WindMar obtains wave data from the CMEMS Global Ocean Waves
                    Analysis and Forecast product (<code>cmems_mod_glo_wav_anfc_0.083deg_PT3H-i</code>),
                    which provides spectral wave parameters on a global 0.083&deg; grid
                    (approximately 9 km at the equator) at 3-hourly temporal resolution. The forecast
                    extends to 120 hours (5 days) with output at hours 0, 3, 6, &hellip;, 120. This
                    product is based on the MFWAM wave model, forced by ECMWF atmospheric analyses, and
                    assimilates satellite altimetry observations to constrain the significant wave height field.
                </p>

                <p>
                    WindMar retrieves a comprehensive set of wave parameters that describe both the total
                    sea state and its decomposition into swell and locally generated wind-wave components.
                    The total sea state parameters (significant wave height, peak period, mean direction)
                    characterize the aggregate ocean surface conditions, while the decomposed fields enable
                    the <a href="hydrodynamics.html">seakeeping model</a> to compute vessel motions and
                    added resistance separately for long-period swell and short-crested wind-waves, which
                    produce qualitatively different vessel responses.
                </p>

                <h3>3.1 Total Sea State Parameters</h3>
                <p>
                    The total sea state is described by three primary parameters derived from the
                    two-dimensional wave energy spectrum. The significant wave height (H<sub>s</sub>) is
                    defined as four times the square root of the zeroth spectral moment (H<sub>s</sub> =
                    4&radic;m<sub>0</sub>) and approximates the average height of the highest one-third
                    of waves, which is the quantity most directly related to wave-induced ship motions and
                    structural loads. The peak wave period (T<sub>p</sub>) is the period at which the
                    wave energy spectrum reaches its maximum, and the mean wave direction indicates the
                    direction from which the dominant wave energy propagates.
                </p>

                <h3>3.2 Complete Wave Parameter Table</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>CMEMS Variable</th>
                            <th>Units</th>
                            <th>Category</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Significant wave height (H<sub>s</sub>)</td>
                            <td><code>VHM0</code></td>
                            <td>m</td>
                            <td>Total sea state</td>
                        </tr>
                        <tr>
                            <td>Peak wave period (T<sub>p</sub>)</td>
                            <td><code>VTPK</code></td>
                            <td>s</td>
                            <td>Total sea state</td>
                        </tr>
                        <tr>
                            <td>Mean wave direction</td>
                            <td><code>VMDR</code></td>
                            <td>degrees</td>
                            <td>Total sea state</td>
                        </tr>
                        <tr>
                            <td>Swell significant height</td>
                            <td><code>VHM0_SW1</code></td>
                            <td>m</td>
                            <td>Primary swell system</td>
                        </tr>
                        <tr>
                            <td>Swell mean period</td>
                            <td><code>VTM01_SW1</code></td>
                            <td>s</td>
                            <td>Primary swell system</td>
                        </tr>
                        <tr>
                            <td>Swell mean direction</td>
                            <td><code>VMDR_SW1</code></td>
                            <td>degrees</td>
                            <td>Primary swell system</td>
                        </tr>
                        <tr>
                            <td>Wind-wave significant height</td>
                            <td><code>VHM0_WW</code></td>
                            <td>m</td>
                            <td>Locally generated</td>
                        </tr>
                        <tr>
                            <td>Wind-wave mean period</td>
                            <td><code>VTM01_WW</code></td>
                            <td>s</td>
                            <td>Locally generated</td>
                        </tr>
                        <tr>
                            <td>Wind-wave mean direction</td>
                            <td><code>VMDR_WW</code></td>
                            <td>degrees</td>
                            <td>Locally generated</td>
                        </tr>
                        <tr>
                            <td>Mean wave period (spectral)</td>
                            <td><code>VTM02</code></td>
                            <td>s</td>
                            <td>Spectral moment</td>
                        </tr>
                        <tr>
                            <td>Peak wave period</td>
                            <td><code>VTPK</code></td>
                            <td>s</td>
                            <td>Spectral peak</td>
                        </tr>
                    </tbody>
                </table>

                <p>
                    The spectral mean period <code>VTM02</code> is computed from the ratio of the zeroth
                    and second spectral moments (T<sub>m02</sub> = &radic;(m<sub>0</sub>/m<sub>2</sub>))
                    and provides a measure of the average wave period that is less sensitive to spectral
                    shape than the peak period. Both period measures are retained because the peak period
                    is more relevant for resonance calculations (encounter frequency), while the mean
                    period better characterizes the bulk energy content of the sea state.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- WAVE DECOMPOSITION -->
            <!-- ============================================================ -->
            <section id="wave-decomposition">
                <h3>3.3 Wave Spectrum Decomposition</h3>

                <p>
                    The ocean wave field at any location is typically composed of multiple wave systems
                    with different origins. Wind-waves (also called wind-sea) are generated locally by
                    the action of wind stress on the sea surface; they are short-crested, have relatively
                    short periods (typically 3&ndash;8 seconds), and their direction aligns closely with
                    the local wind direction. Swell, by contrast, consists of waves that have propagated
                    away from their generation area (a distant storm) and can travel thousands of
                    kilometres with minimal energy loss. Swell waves are long-crested, have longer
                    periods (typically 8&ndash;20 seconds), and their direction may bear no relationship
                    to the local wind. A vessel transiting the North Atlantic, for example, may
                    simultaneously experience locally generated wind-waves from a northwesterly breeze
                    and long-period swell arriving from a storm system far to the southwest.
                </p>

                <p>
                    The CMEMS wave model partitions the two-dimensional wave spectrum into swell and
                    wind-wave components using the Hasselmann et al. (1994) spectral partitioning
                    algorithm. This decomposition is physically meaningful because the two wave types
                    produce qualitatively different vessel responses. Short-period wind-waves with periods
                    near the vessel's natural roll period (typically 8&ndash;15 seconds for cargo ships)
                    can excite resonant rolling motions, while long-period swell primarily causes heaving
                    and pitching. The added resistance mechanisms also differ: wind-waves contribute mainly
                    through radiation stress and wave reflection at the bow, while swell contributes
                    through diffraction effects and hull pressure changes that depend on the ratio of
                    wavelength to ship length.
                </p>

                <p>
                    The total significant wave height is related to the component heights through the
                    energy conservation principle:
                </p>

                <div class="formula-block">
                    <div class="formula-title">Wave Energy Partition</div>
\[ H_s^2 \approx H_{\text{swell}}^2 + H_{\text{windwave}}^2 \]
<div class="formula-where">
where \( H_s \) = total significant wave height (VHM0)<br>
\( H_{\text{swell}} \) = primary swell significant height (VHM0_SW1)<br>
\( H_{\text{windwave}} \) = wind-wave significant height (VHM0_WW)
</div>
<div class="formula-where" style="margin-top: 0.75rem;">
This follows from the additivity of spectral energy (variance):<br>
\( m_{0,\text{total}} = m_{0,\text{swell}} + m_{0,\text{windwave}} \)<br>
\( H_s = 4\sqrt{m_0} \)
</div>
                </div>

                <p>
                    The decomposition is critical for WindMar's seakeeping model, which implements
                    <code>SeakeepingModel.calculate_motions_decomposed()</code> to compute vessel
                    response separately for each wave system. For a given vessel heading, the encounter
                    frequency differs between swell (long period, hence low encounter frequency) and
                    wind-waves (short period, higher encounter frequency), leading to different positions
                    on the vessel's Response Amplitude Operator (RAO) curves. Summing the motions from
                    each component provides a more accurate estimate of total vessel response than
                    computing motions from the aggregate sea state parameters alone, particularly in
                    bimodal sea states where swell and wind-waves arrive from different directions.
                    Further details on the hydrodynamic response calculations are provided in the
                    <a href="hydrodynamics.html">Hydrodynamics &amp; RAO</a> article.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- CURRENT FIELDS -->
            <!-- ============================================================ -->
            <section id="current-fields">
                <h2>4. Ocean Current Fields</h2>

                <p>
                    Ocean surface currents affect vessel routing by altering the speed over ground (SOG)
                    relative to the speed through water (STW). A favourable current of 1&ndash;2 knots
                    (common in regions such as the Gulf Stream, Kuroshio, or Agulhas Current) can reduce
                    passage time by several hours on a trans-oceanic voyage, while an adverse current of
                    the same magnitude increases both passage time and fuel consumption. WindMar obtains
                    ocean current data from the CMEMS Global Ocean Physics Analysis and Forecast product
                    (<code>cmems_mod_glo_phy_anfc_0.083deg_PT1H-m</code>), which provides surface current
                    vectors on a 0.083&deg; global grid (approximately 9 km) at hourly temporal resolution.
                    Forecast output extends to 120 hours at 3-hourly steps (hours 0, 3, 6, &hellip;, 120),
                    consistent with the wave forecast horizon.
                </p>

                <p>
                    The current field is represented as two orthogonal velocity components: <code>uo</code>
                    (eastward velocity, positive eastward) and <code>vo</code> (northward velocity, positive
                    northward), both in metres per second. These are stored in the <code>WeatherData</code>
                    dataclass as <code>u_component</code> and <code>v_component</code>, analogous to the
                    wind field representation. The scalar current speed and direction are derived using the
                    same vector decomposition as for wind:
                </p>

                <div class="formula-block">
                    <div class="formula-title">Current Speed and Direction from U/V Components</div>
\[ \text{current\_speed} = \sqrt{u_o^2 + v_o^2} \]
\[ \text{current\_direction} = \bigl(270 - \arctan2(v_o, u_o) \times \tfrac{180}{\pi}\bigr) \bmod 360 \]
<div class="formula-where">
where \( u_o \) is the eastward current velocity (m/s)<br>
\( v_o \) is the northward current velocity (m/s)<br>
\( \text{current\_direction} \) is the direction FROM which the current flows (degrees)
</div>
                </div>

                <p>
                    The effect of currents on vessel ground speed is computed in the voyage calculator
                    (<code>VoyageCalculator._calculate_sog()</code>) by vector addition. The vessel's
                    speed through water (STW) along its heading is combined with the current vector
                    projected onto the vessel's track direction to obtain the effective speed over ground.
                    When the current has a component aligned with the vessel's heading, it increases SOG
                    and reduces passage time; when opposed, it decreases SOG and increases fuel consumption
                    per nautical mile of ground track covered.
                </p>

                <h3>4.1 Current Parameter Table</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>CMEMS Variable</th>
                            <th>Source Dataset</th>
                            <th>Resolution</th>
                            <th>Units</th>
                            <th>Temporal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Eastward current velocity</td>
                            <td><code>uo</code></td>
                            <td><code>cmems_mod_glo_phy_anfc_0.083deg_PT1H-m</code></td>
                            <td>0.083&deg;</td>
                            <td>m/s</td>
                            <td>Hourly</td>
                        </tr>
                        <tr>
                            <td>Northward current velocity</td>
                            <td><code>vo</code></td>
                            <td><code>cmems_mod_glo_phy_anfc_0.083deg_PT1H-m</code></td>
                            <td>0.083&deg;</td>
                            <td>m/s</td>
                            <td>Hourly</td>
                        </tr>
                        <tr>
                            <td>Current speed (derived)</td>
                            <td>&mdash;</td>
                            <td>Computed</td>
                            <td>0.083&deg;</td>
                            <td>m/s</td>
                            <td>&mdash;</td>
                        </tr>
                        <tr>
                            <td>Current direction (derived)</td>
                            <td>&mdash;</td>
                            <td>Computed</td>
                            <td>0.083&deg;</td>
                            <td>degrees</td>
                            <td>&mdash;</td>
                        </tr>
                    </tbody>
                </table>

                <p>
                    Compared to the atmospheric wind and wave fields, the ocean current analysis product
                    has higher temporal resolution (hourly versus 3-hourly for waves and wind forecasts)
                    but represents an analysis rather than a pure forecast product. The CMEMS physics
                    model assimilates in-situ observations (Argo floats, moored buoys) and satellite
                    altimetry to produce a nowcast, which is then propagated forward as a forecast. The
                    current field is generally more persistent and predictable than wind or waves over
                    the 5-day forecast horizon, particularly for major ocean currents whose positions
                    are determined by large-scale thermohaline and wind-driven circulation patterns.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- OCEAN MASK -->
            <!-- ============================================================ -->
            <section id="ocean-mask">
                <h2>5. Ocean Mask and Land Filtering</h2>

                <p>
                    A practical requirement for any maritime weather routing system is the ability to
                    distinguish ocean grid points from land grid points. While the CMEMS and GFS
                    products naturally contain NaN or missing values over land, the routing grid must
                    explicitly exclude land nodes to prevent the <a href="astar-pathfinding.html">A*
                    pathfinding algorithm</a> from generating routes that cross land masses. WindMar
                    implements ocean masking at two levels: server-side during weather data ingestion
                    and client-side during weather grid visualization.
                </p>

                <h3>5.1 Server-Side Masking</h3>
                <p>
                    The backend uses the <code>global_land_mask</code> Python library to generate a
                    boolean ocean mask at 0.05&deg; resolution (approximately 5.5 km at the equator).
                    The <code>_build_ocean_mask()</code> function evaluates every grid point within
                    the requested geographic extent and returns a two-dimensional boolean array where
                    <code>True</code> indicates water and <code>False</code> indicates land. This mask
                    is applied to all weather grids before they are served to the routing engine,
                    ensuring that NaN-filled land pixels from the upstream data sources are explicitly
                    flagged as non-navigable. The 0.05&deg; mask resolution is finer than the coarsest
                    weather data (GFS at 0.25&deg;), which prevents the mask from inadvertently
                    blocking narrow straits or coastal passages that are resolved by the land mask
                    but not by the weather grid.
                </p>

                <h3>5.2 Client-Side Masking</h3>
                <p>
                    On the frontend, the <code>WeatherGridLayer</code> component applies per-pixel
                    ocean masking when rendering weather data on the map. Each grid cell is checked
                    against the land mask before rendering its colour-coded weather value, preventing
                    the display of weather data over land areas. This is purely a visualization concern
                    and does not affect the routing computation, but it provides users with a clear
                    visual representation of where weather data is available and where the routing
                    graph has been constrained to water-only nodes.
                </p>

                <h3>5.3 Why Explicit Masking is Necessary</h3>
                <p>
                    Relying solely on NaN values in the upstream CMEMS or GFS data for land exclusion
                    is insufficient for several reasons. First, different data products have different
                    land-sea masks: the GFS 0.25&deg; grid treats some coastal grid cells as land that
                    the CMEMS 0.083&deg; grid treats as water, and vice versa. Second, interpolation at
                    grid boundaries can produce non-NaN values over land when nearby ocean grid points
                    are used in the bilinear weighting. Third, the A* routing algorithm requires a
                    consistent binary navigability grid that does not depend on which weather parameter
                    happens to be queried. The <code>global_land_mask</code> at 0.05&deg; provides
                    this consistent reference, derived from high-resolution geographic data rather than
                    from the weather model's own land-sea classification.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- API PERFORMANCE -->
            <!-- ============================================================ -->
            <section id="api-performance">
                <h2>6. API Performance Benchmarks</h2>

                <p>
                    All weather endpoints enforce a maximum bounding box of 30&deg; latitude &times;
                    70&deg; longitude to prevent excessive memory consumption during CMEMS and GFS
                    downloads. The default viewport is centred on the NE Atlantic and Mediterranean
                    (30&deg;N&ndash;60&deg;N, 30&deg;W&ndash;40&deg;E), which fits exactly within
                    this constraint. The following benchmarks were measured on this default viewport
                    with a cold cache (no file cache, empty Redis, empty database) on 24 February 2026.
                </p>

                <h3>6.1 Single-Frame Fetch (Cold Cache)</h3>
                <p>
                    Each endpoint was called once with <code>resolution=1</code> on the full
                    30&deg;&times;70&deg; viewport. Times include the upstream download from
                    CMEMS or GFS where applicable.
                </p>

                <table>
                    <thead>
                        <tr>
                            <th>Endpoint</th>
                            <th>Source</th>
                            <th>Response Size</th>
                            <th>Time (cold)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>/api/weather/wind</code></td>
                            <td>GFS (NOAA)</td>
                            <td>967 KB</td>
                            <td>0.15 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/wind/velocity</code></td>
                            <td>GFS (NOAA)</td>
                            <td>781 KB</td>
                            <td>0.14 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/waves</code></td>
                            <td>CMEMS</td>
                            <td>2.5 MB</td>
                            <td>106 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/swell</code></td>
                            <td>CMEMS (shared)</td>
                            <td>5.8 MB</td>
                            <td>1.6 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/currents</code></td>
                            <td>CMEMS</td>
                            <td>3.4 MB</td>
                            <td>79 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/currents/velocity</code></td>
                            <td>CMEMS (cached)</td>
                            <td>1.9 MB</td>
                            <td>35 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/sst</code></td>
                            <td>CMEMS</td>
                            <td>1.0 MB</td>
                            <td>35 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/ice</code></td>
                            <td>CMEMS</td>
                            <td>926 KB</td>
                            <td>7 s</td>
                        </tr>
                        <tr>
                            <td><code>/api/weather/visibility</code></td>
                            <td>GFS (NOAA)</td>
                            <td>771 KB</td>
                            <td>1.6 s</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert info">
                    <strong><i class="fas fa-info-circle"></i> Cold vs Warm Cache</strong><br>
                    The long fetch times for waves (106 s) and currents (79 s) reflect the initial
                    CMEMS download over the Copernicus Marine API. Once cached, subsequent requests
                    for the same viewport and forecast hour return in under 2 seconds. Swell shares
                    the wave download and returns instantly after the wave layer has been fetched.
                    GFS wind data is served from GRIB2 files cached on disk and is sub-second even
                    on the first request of a new model run.
                </div>

                <h3>6.2 Viewport Constraints</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                            <th>Enforced At</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Maximum latitude span</td>
                            <td>30&deg;</td>
                            <td>Backend (<code>_clamp_bbox</code>) + Frontend (<code>MapViewportProvider</code>)</td>
                        </tr>
                        <tr>
                            <td>Maximum longitude span</td>
                            <td>70&deg;</td>
                            <td>Backend (<code>_clamp_bbox</code>) + Frontend (<code>MapViewportProvider</code>)</td>
                        </tr>
                        <tr>
                            <td>Default viewport</td>
                            <td>30&deg;N&ndash;60&deg;N, 30&deg;W&ndash;40&deg;E</td>
                            <td>Backend Query defaults + Frontend <code>InitialFitBounds</code></td>
                        </tr>
                        <tr>
                            <td>Max overlay grid dimension</td>
                            <td>500 px</td>
                            <td>Backend (<code>_overlay_step</code> subsampling)</td>
                        </tr>
                    </tbody>
                </table>

                <p>
                    Requests exceeding the maximum span are silently clamped to the limit, centred
                    on the requested midpoint. This protects the backend from out-of-memory conditions
                    when users zoom out to global scale: at 30&deg;&times;70&deg;, the CMEMS wave
                    download is approximately 400 MB on disk (8 parameters &times; 41 forecast steps
                    &times; ~304K native grid points at 0.083&deg;), which is within the memory budget
                    of a 4-worker Gunicorn deployment.
                </p>

                <h3 id="startup-prefetch">6.3 Startup Prefetch</h3>
                <p>
                    WindMar prefetches all weather fields into the database at application startup,
                    so that the user never waits for an upstream download when switching layers or
                    scrubbing the forecast timeline. The prefetch runs automatically in a background
                    thread immediately after the application lifespan initialises. A PostgreSQL
                    <a href="https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS" target="_blank">advisory lock</a>
                    ensures that only one Gunicorn worker executes the prefetch, even when
                    multiple workers start concurrently.
                </p>

                <h4>Architecture</h4>
                <p>
                    The prefetch uses a <code>ThreadPoolExecutor</code> with 4 parallel workers,
                    one per field group. Each worker calls <code>_do_generic_prefetch()</code>,
                    which downloads all 41 forecast hours for a given field from the upstream
                    data source (CMEMS or GFS), writes the data to the file cache on disk, and
                    ingests it into the PostgreSQL <code>weather_grid_data</code> table. The
                    entire sequence completes before any user interaction occurs and populates
                    the database for the default viewport.
                </p>

                <div class="alert info">
                    <strong><i class="fas fa-info-circle"></i> Data Flow</strong><br>
                    Without prefetch, single-frame API requests follow the provider chain
                    Redis &rarr; Database &rarr; Upstream (CMEMS/GFS) &rarr; Synthetic fallback,
                    and only cache results in Redis (60-second TTL). After prefetch, the
                    database layer intercepts the request and returns persisted data directly
                    &mdash; no upstream calls, no waiting.
                </div>

                <h4>Prefetch Timing (Default Viewport)</h4>
                <p>
                    Measured on the default viewport (30&deg;N&ndash;60&deg;N, 30&deg;W&ndash;40&deg;E)
                    with 4 parallel workers on 24 February 2026. Times include the upstream download,
                    file cache write, and database ingestion for all 41 forecast hours per field.
                </p>

                <table>
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Source</th>
                            <th>Forecast Hours</th>
                            <th>DB Parameters</th>
                            <th>Prefetch Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Wind</td>
                            <td>GFS (NOAA)</td>
                            <td>41</td>
                            <td>u10, v10 (file cache)</td>
                            <td>6 s (cached) &ndash; 109 s (cold)</td>
                        </tr>
                        <tr>
                            <td>Waves</td>
                            <td>CMEMS</td>
                            <td>41</td>
                            <td>wave_hs, wave_dir, wave_tp, windwave_hs, windwave_dir, windwave_tp</td>
                            <td>5 s (cached) &ndash; 17 s</td>
                        </tr>
                        <tr>
                            <td>Swell</td>
                            <td>CMEMS (shared)</td>
                            <td>41</td>
                            <td>swell_hs, swell_dir, swell_tp</td>
                            <td>4 s (cached) &ndash; 17 s</td>
                        </tr>
                        <tr>
                            <td>Currents</td>
                            <td>CMEMS</td>
                            <td>41</td>
                            <td>current_u, current_v</td>
                            <td>5 s (cached) &ndash; 10 s</td>
                        </tr>
                        <tr>
                            <td>Sea Surface Temp</td>
                            <td>CMEMS</td>
                            <td>41</td>
                            <td>sst</td>
                            <td>2 s (cached) &ndash; 35 s</td>
                        </tr>
                        <tr>
                            <td>Ice Concentration</td>
                            <td>CMEMS</td>
                            <td>9</td>
                            <td>ice_siconc</td>
                            <td>&lt; 1 s (cached) &ndash; 7 s</td>
                        </tr>
                        <tr>
                            <td>Visibility</td>
                            <td>GFS (NOAA)</td>
                            <td>41</td>
                            <td>visibility</td>
                            <td>81 s (cold) &ndash; 6 s (cached)</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4"><strong>Total (parallel, 4 workers)</strong></td>
                            <td><strong>~90 s</strong></td>
                        </tr>
                    </tfoot>
                </table>

                <p>
                    The total wall-clock time is governed by the slowest field group: GFS wind
                    and visibility, which download individual GRIB2 files for each of the 41
                    forecast hours. CMEMS fields are faster because the Copernicus Marine API
                    supports bulk multi-timestep downloads in a single NetCDF request. After
                    the first run, file cache hits reduce total prefetch time to approximately
                    10&ndash;15 seconds on subsequent container restarts within the same
                    forecast model run.
                </p>

                <h4>Database Contents After Prefetch</h4>
                <p>
                    After a successful prefetch, the <code>weather_grid_data</code> table
                    contains the following rows (measured 24 February 2026):
                </p>

                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Frames</th>
                            <th>Grid Size</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>wave_hs, wave_dir, wave_tp</td><td>82 (41 &times; 2 runs)</td><td>361 &times; 841</td></tr>
                        <tr><td>windwave_hs, windwave_dir, windwave_tp</td><td>82</td><td>361 &times; 841</td></tr>
                        <tr><td>swell_hs, swell_dir, swell_tp</td><td>82</td><td>361 &times; 841</td></tr>
                        <tr><td>current_u, current_v</td><td>41</td><td>361 &times; 841</td></tr>
                        <tr><td>sst</td><td>41</td><td>121 &times; 281</td></tr>
                        <tr><td>ice_siconc</td><td>9</td><td>121 &times; 281</td></tr>
                        <tr><td>visibility</td><td>41</td><td>121 &times; 281</td></tr>
                    </tbody>
                </table>

                <p>
                    Wind data is stored in the GFS GRIB2 file cache rather than in PostgreSQL,
                    because GFS files are already indexed by forecast hour and can be read
                    directly by <code>cfgrib</code>/<code>xarray</code> without the overhead
                    of binary serialisation into database rows. The file cache path follows
                    the pattern: <code>data/copernicus_cache/gfs_wind_YYYYMMDD_HH_fNNN_latX_Y_lonX_Y.grib2</code>.
                </p>

                <h4>Advisory Lock Mechanism</h4>
                <p>
                    Gunicorn typically starts 2&ndash;4 worker processes, each of which
                    runs the application lifespan independently. Without coordination,
                    all workers would attempt to download the same data simultaneously,
                    saturating upstream bandwidth and causing duplicate database inserts.
                    WindMar uses PostgreSQL session-level advisory locks
                    (<code>pg_try_advisory_lock(20260224)</code>) to ensure exactly one
                    worker executes the prefetch. The remaining workers detect the lock
                    and skip the prefetch entirely, logging
                    <code>"Another worker is running weather prefetch, skipping"</code>.
                    The lock is released after prefetch completes (or fails), and all
                    workers share the database contents written by the single prefetching
                    worker.
                </p>

                <div class="alert warning">
                    <strong><i class="fas fa-exclamation-triangle"></i> Startup Time Budget</strong><br>
                    The prefetch runs in a daemon thread and does not block the application
                    from serving HTTP requests. The API is ready immediately after lifespan
                    initialisation; weather layers served during the prefetch window will
                    trigger on-demand upstream downloads as usual. Once prefetch completes,
                    all subsequent requests within the default viewport are served from
                    the database with sub-second latency.
                </div>
            </section>

            <!-- ============================================================ -->
            <!-- DATA QUALITY -->
            <!-- ============================================================ -->
            <section id="data-quality">
                <h2>7. Data Quality and Limitations</h2>

                <p>
                    The quality and reliability of the environmental data used in weather routing
                    directly affects the fidelity of vessel performance predictions and route
                    optimization outcomes. Several factors limit the accuracy of the data fields
                    described in this article, and WindMar implements a provenance tracking system
                    to communicate forecast confidence to the user.
                </p>

                <h3>7.1 Forecast Accuracy Degradation</h3>
                <p>
                    All numerical weather prediction products exhibit accuracy degradation with
                    increasing forecast lead time. For GFS 10-metre wind, the root-mean-square error
                    (RMSE) is approximately 1.5 m/s at 24 hours, increasing to approximately 3.5 m/s
                    at 120 hours. CMEMS significant wave height errors follow a similar pattern, with
                    RMSE of approximately 0.2 m at short lead times growing to 0.5&ndash;0.8 m at
                    the 5-day horizon. Ocean current forecasts are generally more stable, with RMSE
                    below 0.1 m/s for major current systems, though mesoscale eddies and transient
                    features are poorly predicted beyond 2&ndash;3 days.
                </p>

                <p>
                    WindMar communicates forecast confidence through the <code>WeatherProvenance</code>
                    system, which assigns three confidence levels based on data age and forecast
                    lead time:
                </p>

                <table>
                    <thead>
                        <tr>
                            <th>Confidence Level</th>
                            <th>Forecast Lead Time</th>
                            <th>Interpretation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>High</strong></td>
                            <td>&lt; 72 hours</td>
                            <td>Weather forecast is within the high-skill window; route optimization is reliable</td>
                        </tr>
                        <tr>
                            <td><strong>Medium</strong></td>
                            <td>72 &ndash; 120 hours</td>
                            <td>Forecast skill is moderate; significant uncertainty in timing and intensity of weather systems</td>
                        </tr>
                        <tr>
                            <td><strong>Low</strong></td>
                            <td>&gt; 120 hours</td>
                            <td>Beyond deterministic forecast horizon; data is blended with or replaced by ERA5 climatology</td>
                        </tr>
                    </tbody>
                </table>

                <h3>7.2 Spatial Resolution Limitations</h3>
                <p>
                    The 0.083&deg; resolution of CMEMS wave and current products corresponds to
                    approximately 9 km at the equator and approximately 5 km at 55&deg;N latitude.
                    While this resolution is adequate for open-ocean routing, it is insufficient for
                    resolving coastal processes such as wave refraction in shallow water, tidal current
                    acceleration in straits, and sheltering effects behind headlands and islands. Port
                    approach routing, where these effects are significant, would require higher-resolution
                    regional models (e.g., 100&ndash;500 m coastal wave models) that are outside the
                    scope of WindMar's current data architecture. The GFS wind field at 0.25&deg;
                    (approximately 28 km) is even coarser and cannot resolve local wind effects such
                    as orographic acceleration, land-sea breezes, or gap winds in mountainous coastal
                    terrain.
                </p>

                <h3>7.3 Climatological Fallback</h3>
                <p>
                    When the voyage duration exceeds the operational forecast horizon, WindMar's
                    <code>ClimatologyProvider</code> transitions from forecast data to ERA5 monthly
                    climatological means. The transition is governed by two parameters:
                    <code>FORECAST_HORIZON_DAYS = 10</code>, which defines the outer boundary of
                    the forecast window, and <code>BLEND_WINDOW_DAYS = 2</code>, which defines
                    a linear blending zone between pure forecast and pure climatology. Within
                    the blending window, wind fields are computed as a weighted average of the
                    forecast and climatological values, producing a smooth transition that avoids
                    discontinuities at the forecast boundary. Climatological fields represent
                    long-term average conditions and do not capture individual weather systems;
                    the <a href="monte-carlo.html">Monte Carlo simulation</a> is particularly
                    important for quantifying uncertainty in the climatological portion of a
                    long voyage.
                </p>

                <h3>7.4 Geographic Coverage</h3>
                <p>
                    The data sources used by WindMar provide global coverage with latitude bounds
                    of &minus;85&deg; to +85&deg;, excluding extreme polar regions where sea ice
                    prevents commercial navigation and where weather model output is unreliable.
                    Within this domain, the GFS model provides complete global coverage at 0.25&deg;,
                    while the CMEMS wave and current products cover the global ocean at 0.083&deg;.
                    Coverage gaps may occur in semi-enclosed seas or near the coast where the CMEMS
                    model grid does not extend, though such gaps are rare in the open ocean where
                    weather routing is most relevant.
                </p>
            </section>

            <!-- ============================================================ -->
            <!-- REFERENCES -->
            <!-- ============================================================ -->
            <section id="references">
                <h2>References</h2>

                <ol>
                    <li>
                        NCEP/NOAA (2023).
                        &ldquo;Global Forecast System (GFS) Model Documentation.&rdquo;
                        National Centers for Environmental Prediction.
                    </li>
                    <li>
                        Hersbach, H. et al. (2020).
                        &ldquo;The ERA5 Global Reanalysis.&rdquo;
                        <em>Quarterly Journal of the Royal Meteorological Society</em>, vol. 146, no. 730, pp. 1999&ndash;2049.
                        DOI: 10.1002/qj.3803
                    </li>
                    <li>
                        CMEMS (2024).
                        &ldquo;Global Ocean Waves Analysis and Forecast &mdash; Product User Manual.&rdquo;
                        Copernicus Marine Environment Monitoring Service.
                    </li>
                    <li>
                        CMEMS (2024).
                        &ldquo;Global Ocean Physics Analysis and Forecast &mdash; Product User Manual.&rdquo;
                        Copernicus Marine Environment Monitoring Service.
                    </li>
                    <li>
                        WMO (1998).
                        &ldquo;Guide to Wave Analysis and Forecasting.&rdquo;
                        WMO-No. 702, World Meteorological Organization, 2nd ed.
                    </li>
                    <li>
                        Holthuijsen, L.H. (2007).
                        <em>Waves in Oceanic and Coastal Waters</em>.
                        Cambridge University Press.
                    </li>
                    <li>
                        Komen, G.J. et al. (1994).
                        <em>Dynamics and Modelling of Ocean Waves</em>.
                        Cambridge University Press.
                    </li>
                </ol>
            </section>

        </div>
    </main>

</div>

<!-- Footer -->
<footer class="docs-footer">
    <p>&copy; 2026 WindMar. Apache License 2.0.</p>
    <p>
        <a href="https://github.com/windmar-nav/windmar" target="_blank"><i class="fab fa-github"></i> GitHub</a>
        &nbsp;|&nbsp;
        <a href="docs.html">Main Documentation</a>
        &nbsp;|&nbsp;
        <a href="https://slmar.co">slmar.co</a>
    </p>
</footer>

<!-- Sidebar active state script -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.sidebar-menu a[href^="#"]');

        function setActiveLink() {
            let current = '';
            sections.forEach(function(section) {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(function(link) {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', setActiveLink);
        setActiveLink();
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: '\\[', right: '\\]', display: true},
                {left: '\\(', right: '\\)', display: false}
            ],
            throwOnError: false
        });
    });
</script>

</body>
</html>
